<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: js.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: js.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const FIELD_PREFIX ='#id_profile_field_';
const FIELD_WRAPPER = '#fitem_id_profile_field_';
/** Class add the hide or Show ability to the children */
class hideShow{
  /**
   * create the vairbles
   * @param {sting} par - Name of the Parent Field
   * @param {array} pv - Values from the parent field
   * @param {array} ct - Children to show
   */
  constructor(par, pv, ct){
    this.parent = FIELD_PREFIX + par;
    this.parentValues = pv;
    this.childrenToShow = ct;
  }
  /**
   *  @method  exec
   * @desc Preforms the actions required to hide or show the children fields
   */
  exec(){
    var currentValue = document.querySelector(this.parent).value;
    var indexes = getAllIndexes(this.parentValues, currentValue);
    this.childrenToShow.forEach(child => {document.querySelector(FIELD_WRAPPER + child).setAttribute('aria-hidden', 'true');
                                         document.querySelector(FIELD_PREFIX + child).value = "-1";
                                         var event = new Event('change');
                                          document.querySelector(FIELD_PREFIX + child).dispatchEvent(event);
                                         })
    indexes.forEach(i => {
      document.querySelector(FIELD_WRAPPER + this.childrenToShow[i]).setAttribute('aria-hidden','false');
    });
  }
}
/** class updates the values in the child field */
class update{
  /**
   *  create the varibles
   * @param {string} pa - Name of Parent field
   * @param {string} cu - Name of current Field
   * @param {array} pv - Parent Values (a.k.a trigger values)
   * @param {array} cv - children Values (a.k.a update values)
   * @param {string=} sv - Phrase to show as the first option with value of -1
   */
  constructor(pa, cu, pv, cv, sv){
    this.parent = FIELD_PREFIX + pa;
    this.currentField = FIELD_PREFIX + cu
    this.parentValues = pv;
    this.childrenValues = cv;
    this.selectPhrase = sv || 'Select';
  }
  /**
   *  @method  exec
   * @desc Preforms the actions required to hide or show the children fields
   */
  exec(){
    var currentValue = document.querySelector(this.parent).value;
    if (currentValue === "-1"){ return false;}
    var indexes = getAllIndexes(this.parentValues, currentValue);
    var valuesToShow = indexes.map(i => this.childrenValues[i]);
    var thisSelect = document.querySelector(this.currentField);
    thisSelect.innerHTML = `&lt;option value="-1">${this.selectPhrase}&lt;/option>`;
    valuesToShow.forEach(v => {
      var o = document.createElement('option');
      o.text = v;
      o.value = v;
      thisSelect.add(o);})

  }
}

/**
* get all of the indexes for the values within an array
* @param {array} arr - array to check
* @param {*} value - to be found in array
* @see @link{http://stackoverflow.com/questions/20798477}
*/
function getAllIndexes(arr, val) {
    var indexes = [], i;
    for(i = 0; i &lt; arr.length; i++)
        if (arr[i] === val)
            indexes.push(i);
    return indexes;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="hideShow.html">hideShow</a></li><li><a href="update.html">update</a></li></ul><h3>Global</h3><ul><li><a href="global.html#exec">exec</a></li><li><a href="global.html#getAllIndexes">getAllIndexes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Mar 25 2017 22:04:55 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
